<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="/style">
    <link rel="stylesheet" href="/header">

<script src="/functions.js" type="text/javascript"></script>
<script src="/dashboard.js" type="text/javascript"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<script>
    
     async function loadAllDashboards() {
            const response = await axios.get('http://localhost:3000/user/dashboardList');
            let dashboardList = response.data.dashboardList;
            let blockList = [];
            for (let i = 0; i < dashboardList.length; i++) {
                blockList = await loadDashboard(dashboardList[i]);
            }
            let div = document.getElementById('dashboard');
            for (let i = 0; i < blockList.length; i++) {
                let block = blockList[i];
                block.build(div, "edit");
            }
            dragAndDrop();
        }
        loadAllDashboards();
</script>

</head>
<header>
    <h1>Dashboard Buddy</h1>
    <div class="user-button">
        <form action="/user/logout" method="get">
            <button class="user" type="submit">Log out</button>
        </form>
    </div>
</header>
<body>
    <div class="second-header">
        <h2>Edit Block List</h2>
        <button onclick="window.location.href='/editBlock'">Add/Edit Block</button>
    </div>
    <div class="drag-instructions">Drag and drop to reorder the blocks</div>
    <div id="dashboard"></div>
</body>
</html>